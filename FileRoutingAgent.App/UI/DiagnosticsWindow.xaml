<Window x:Class="FileRoutingAgent.App.UI.DiagnosticsWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Diagnostics"
        Height="760"
        Width="1200"
        WindowStartupLocation="CenterScreen">
  <Grid Margin="12">
    <Grid.RowDefinitions>
      <RowDefinition Height="Auto" />
      <RowDefinition Height="*" />
      <RowDefinition Height="*" />
      <RowDefinition Height="*" />
      <RowDefinition Height="Auto" />
    </Grid.RowDefinitions>

    <TextBlock x:Name="SummaryText"
               FontWeight="SemiBold"
               FontSize="14"
               TextWrapping="Wrap"
               Margin="0,0,0,8" />

    <GroupBox Header="Root Availability" Grid.Row="1" Margin="0,0,0,8">
      <DataGrid x:Name="RootsGrid"
                IsReadOnly="True"
                AutoGenerateColumns="False"
                CanUserAddRows="False">
        <DataGrid.Columns>
          <DataGridTextColumn Header="Root" Binding="{Binding RootPath}" Width="*" />
          <DataGridTextColumn Header="State" Binding="{Binding State}" Width="140" />
          <DataGridTextColumn Header="Updated (UTC)" Binding="{Binding UpdatedAtUtc}" Width="170" />
          <DataGridTextColumn Header="Note" Binding="{Binding Note}" Width="260" />
        </DataGrid.Columns>
      </DataGrid>
    </GroupBox>

    <GroupBox Header="Recent Scan Runs" Grid.Row="2">
      <DataGrid x:Name="ScansGrid"
                IsReadOnly="True"
                AutoGenerateColumns="False"
                CanUserAddRows="False">
        <DataGrid.Columns>
          <DataGridTextColumn Header="Started (UTC)" Binding="{Binding StartedUtc}" Width="170" />
          <DataGridTextColumn Header="Finished (UTC)" Binding="{Binding FinishedUtc}" Width="170" />
          <DataGridTextColumn Header="Root" Binding="{Binding RootPath}" Width="*" />
          <DataGridTextColumn Header="Found" Binding="{Binding CandidatesFound}" Width="80" />
          <DataGridTextColumn Header="Queued" Binding="{Binding Queued}" Width="80" />
          <DataGridTextColumn Header="Skipped" Binding="{Binding Skipped}" Width="80" />
          <DataGridTextColumn Header="Errors" Binding="{Binding Errors}" Width="80" />
        </DataGrid.Columns>
      </DataGrid>
    </GroupBox>

    <GroupBox Header="Connector Publish Activity" Grid.Row="3" Margin="0,8,0,0">
      <DataGrid x:Name="ConnectorGrid"
                IsReadOnly="True"
                AutoGenerateColumns="False"
                CanUserAddRows="False">
        <DataGrid.Columns>
          <DataGridTextColumn Header="At (UTC)" Binding="{Binding AtUtc}" Width="160" />
          <DataGridTextColumn Header="Project" Binding="{Binding ProjectId}" Width="120" />
          <DataGridTextColumn Header="Connector" Binding="{Binding Connector}" Width="150" />
          <DataGridTextColumn Header="Status" Binding="{Binding Status}" Width="130" />
          <DataGridTextColumn Header="Success" Binding="{Binding Success}" Width="80" />
          <DataGridTextColumn Header="External ID" Binding="{Binding ExternalTransactionId}" Width="180" />
          <DataGridTextColumn Header="Source" Binding="{Binding SourcePath}" Width="*" />
          <DataGridTextColumn Header="Destination" Binding="{Binding DestinationPath}" Width="*" />
          <DataGridTextColumn Header="Error" Binding="{Binding Error}" Width="220" />
        </DataGrid.Columns>
      </DataGrid>
    </GroupBox>

    <Button Grid.Row="4"
            HorizontalAlignment="Right"
            Width="100"
            Margin="0,8,0,0"
            Content="Close"
            Click="CloseButton_OnClick" />
  </Grid>
</Window>
